var bird,pipes,gravity=.3,flap=-6,friction=.99,speed=1,score=0,highScore=0,speedUp=!1;function Bird(){this.x=50,this.y=5,this.dx=0,this.dy=0,this.size=50,this.draw=function(){fill("red"),rect(this.x,this.y,50,50)},this.update=function(){bird.dy+=gravity,bird.dy*=friction,bird.y+=bird.dy,400<=this.y+this.size&&restartGame(),this.y+this.size<=0&&restartGame()}}function Pipe(){this.scored=!1,this.x=0,this.y=0,this.width=50,this.height=Math.floor(151*Math.random()+50),this.hole=150,this.draw=function(){fill("green"),rect(this.x,this.y,this.width,this.height),rect(this.x,this.height+this.hole,this.width,400-this.height-this.hole)},this.update=function(){var i=collideRectRect(bird.x,bird.y,50,50,this.x,this.y,this.width,this.height),e=collideRectRect(bird.x,bird.y,50,50,this.x,this.height+this.hole,this.width,400-this.height-this.hole);(i||e)&&restartGame(),bird.x>this.x+this.width&&!this.scored&&(score++,this.scored=!0),this.x+this.width<=0?(this.x=600,this.height=Math.floor(151*Math.random()+50),this.scored=!1):this.x-=speed}}function setup(){createCanvas(300,400),bird=new Bird,pipes=[new Pipe,new Pipe,new Pipe];for(var i=0,e=0;e<pipes.length;e++)pipes[e].x=i+350,i+=200}function draw(){clear(),background(128,128,255),bird.draw();for(var i=0;i<pipes.length;i++)pipes[i].draw(),pipes[i].update();bird.update(),score%10!=0||0===score||speedUp||(speed+=.5,speedUp=!0),score%5&&(speedUp=!1),fill(0),textSize(15),text("Score : "+score,5,20),text("High score : "+highScore,5,35),text("Speed : "+speed,5,50)}function keyTyped(){return" "===key&&(bird.dy=flap),!1}function mousePressed(){return bird.dy=flap,!1}function restartGame(){highScore=highScore<score?score:highScore,score=0,speed=1,bird=new Bird,pipes=[new Pipe,new Pipe,new Pipe];for(var i=0,e=0;e<pipes.length;e++)pipes[e].x=i+350,i+=200}