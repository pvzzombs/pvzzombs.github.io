function Q5(e,t){let r=this;if(r._q5=!0,r._scope=e,r._parent=t,r._preloadCount=0,"auto"==(e??="global")){if(!window.setup&&!window.draw)return;e="global"}let o,n=("global"==e&&(Q5._hasGlobal=r._isGlobal=!0,o=Q5._nodejs?global:window),new Proxy(r,{set:(e,t,a)=>(r[t]=a,r._isGlobal&&(o[t]=a),!0)})),s=(r.canvas=r.ctx=r.drawingContext=null,r.pixels=[],null),a=(r.frameCount=0,r.deltaTime=16,r._targetFrameRate=0,r._targetFrameDuration=16.666666666666668,r._frameRate=r._fps=60,r._loop=!0,0);function i(e){e=e||performance.now();if(r._lastFrameTime??=e-r._targetFrameDuration,r._shouldResize&&(r.windowResized(),r._shouldResize=!1),r._loop)s=p(i);else if(r.frameCount&&!r._redraw)return;if(s&&r.frameCount&&e-r._lastFrameTime<r._targetFrameDuration-1)return;n.deltaTime=e-r._lastFrameTime,r._frameRate=1e3/r.deltaTime,n.frameCount++;var t,a,o=performance.now();for(t of Q5.prototype._methods.pre)t.call(r);r.ctx&&r.ctx.save(),r.draw();for(a of Q5.prototype._methods.post)a.call(r);r.ctx&&(r.ctx.restore(),r.resetMatrix()),n.pmouseX=r.mouseX,n.pmouseY=r.mouseY,r._lastFrameTime=e;e=performance.now();r._fps=Math.round(1e3/(e-o))}for(var l in r.millis=()=>performance.now()-a,r.noCanvas=()=>{r.canvas?.remove&&r.canvas.remove(),r.canvas=0,n.ctx=n.drawingContext=0},window&&(r.windowWidth=window.innerWidth,r.windowHeight=window.innerHeight,r.deviceOrientation=window.screen?.orientation?.type),r._incrementPreload=()=>n._preloadCount++,r._decrementPreload=()=>n._preloadCount--,r.noLoop=()=>{r._loop=!1,s=null},r.loop=()=>{r._loop=!0,null==s&&i()},r.isLooping=()=>r._loop,r.redraw=(t=1)=>{r._redraw=!0;for(let e=0;e<t;e++)i();r._redraw=!1},r.remove=()=>{r.noLoop(),r.canvas.remove()},r.frameRate=e=>(e&&(r._targetFrameRate=e,r._targetFrameDuration=1e3/e),r._frameRate),r.getTargetFrameRate=()=>r._targetFrameRate,r.getFPS=()=>r._fps,r.Element=function(e){this.elt=e},r._elements=[],r.TWO_PI=r.TAU=2*Math.PI,r.log=r.print=console.log,r.describe=()=>{},Q5.modules)Q5.modules[l](r,n);for(var c in Q5)"_"!=c[1]&&c[1]==c[1].toUpperCase()&&(r[c]=Q5[c]);"global"==e&&(Object.assign(Q5,r),delete Q5.Q5);for(var d of Q5.prototype._methods.init)d.call(r);for(var[h,u]of Object.entries(Q5.prototype))"_"!=h[0]&&"function"==typeof r[h]&&(r[h]=u.bind(r));var _;if("global"==e)for(_ of Object.getOwnPropertyNames(r))"_"!=_[0]&&(o[_]=r[_]);if("function"==typeof e&&e(r),"graphics"==e)return;Q5._instanceCount++;let p=window.requestAnimationFrame||function(e){let t=r._lastFrameTime+r._targetFrameDuration;return setTimeout(()=>{e(t)},t-performance.now())},g=o||r;r._isTouchAware=g.touchStarted||g.touchMoved||g.mouseReleased;t=g.preload;for(let e of["setup","draw","preload","mouseMoved","mousePressed","mouseReleased","mouseDragged","mouseClicked","keyPressed","keyReleased","keyTyped","touchStarted","touchMoved","touchEnded","windowResized"])g[e]?r._isGlobal&&(r[e]=()=>{try{return g[e]()}catch(e){r._aiErrorAssistance?r._aiErrorAssistance(e):console.error(e)}}):r[e]=()=>{};async function x(){if(r._startDone=!0,0<r._preloadCount)return p(x);a=performance.now(),await r.setup(),r.frameCount||(null===r.ctx&&r.createCanvas(100,100),r._setupDone=!0,r.ctx&&r.resetMatrix(),p(i))}(r.setup||r.draw)&&(r._startDone=!1,arguments.length&&"namespace"!=e||t?(r.preload(),x()):(g.preload=r.preload=()=>{r._startDone||x()},setTimeout(r.preload,32)))}Q5.modules={},Q5._nodejs="object"==typeof process,Q5._instanceCount=0,Q5._friendlyError=(e,t)=>{throw Error(t+": "+e)},Q5._validateParameters=()=>!0,Q5.prototype._methods={init:[],pre:[],post:[],remove:[]},Q5.prototype.registerMethod=(e,t)=>Q5.prototype._methods[e].push(t),Q5.prototype.registerPreloadMethod=(e,t)=>Q5.prototype[e]=t[e],Q5._nodejs?global.p5??=global.Q5=Q5:"object"==typeof window?window.p5??=window.Q5=Q5:global.window=0,"object"==typeof document&&document.addEventListener("DOMContentLoaded",()=>{Q5._hasGlobal||new Q5("auto")}),Q5.modules.q2d_canvas=(s,n)=>{s._OffscreenCanvas=window.OffscreenCanvas||function(){return document.createElement("canvas")},Q5._nodejs?Q5._createNodeJSCanvas&&(n.canvas=Q5._createNodeJSCanvas(100,100)):"image"!=s._scope&&"graphics"!=s._scope||(n.canvas=new s._OffscreenCanvas(100,100)),s.canvas||("object"==typeof document?(n.canvas=document.createElement("canvas"),s.canvas.id="q5Canvas"+Q5._instanceCount,s.canvas.classList.add("q5Canvas")):s.noCanvas());let i=s.canvas;if(i.width=s.width=100,i.height=s.height=100,i&&"graphics"!=s._scope&&"image"!=s._scope){s._setupDone=!1;let a=s._parent;function e(){(a??=document.getElementsByTagName("main")[0])||(a=document.createElement("main"),document.body.append(a)),i.parent(a)}a&&"string"==typeof a&&(a=document.getElementById(a)),i.parent=e=>{function t(){1<s.frameCount&&(s._shouldResize=!0,s._adjustDisplay())}(e="string"==typeof e?document.getElementById(e):e).append(i),"function"==typeof ResizeObserver?(s._ro&&s._ro.disconnect(),s._ro=new ResizeObserver(t),s._ro.observe(a)):s.frameCount||window.addEventListener("resize",t)},document.body?e():document.addEventListener("DOMContentLoaded",e)}function a(e,t){e??=window.innerWidth,t??=window.innerHeight;var a,o=function(){var e,t={};for(e in s.ctx)"function"!=typeof s.ctx[e]&&(t[e]=s.ctx[e]);return delete t.canvas,t}();let r;for(a in s.frameCount&&((r=new s._OffscreenCanvas(i.width,i.height)).w=i.w,r.h=i.h,r.getContext("2d").drawImage(i,0,0)),i.width=Math.ceil(e*s._pixelDensity),i.height=Math.ceil(t*s._pixelDensity),i.w=e,i.h=t,i.hw=e/2,i.hh=t/2,o)s.ctx[a]=o[a];s.ctx.scale(s._pixelDensity,s._pixelDensity),s.frameCount&&s.ctx.drawImage(r,0,0,r.w,r.h),s._da?s.flexibleCanvas(s._dau):(n.width=e,n.height=t),0!=s.frameCount&&s._adjustDisplay()}s._adjustDisplay=()=>{i.style&&(i.style.width=i.w+"px",i.style.height=i.h+"px")},s.createCanvas=function(e,t,a,o){if("webgl"==a)throw Error("webgl renderer is not supported in q5, use '2d'");"object"==typeof a&&(o=a),n.width=i.width=i.w=e||window.innerWidth,n.height=i.height=i.h=t||window.innerHeight,i.hw=e/2,i.hh=t/2,i.renderer="2d";a=Object.assign({},Q5.canvasOptions);if(o&&Object.assign(a,o),n.ctx=n.drawingContext=i.getContext("2d",a),Object.assign(i,a),"rgb"==s._colorMode&&s.colorMode("rgb"),"image"!=s._scope&&(s._defaultStyle(),s._da=0),s.ctx.save(),"image"!=s._scope){let e=s.displayDensity();"graphics"==s._scope?e=this._pixelDensity:window.IntersectionObserver&&new IntersectionObserver(e=>{i.visible=e[0].isIntersecting}).observe(i),s.pixelDensity(Math.ceil(e))}else this._pixelDensity=1;return s.displayMode?s.displayMode():s._adjustDisplay(),i},s._createCanvas=s.createCanvas,"image"!=s._scope&&(s._defaultStyle=()=>{s.ctx.fillStyle="white",s.ctx.strokeStyle="black",s.ctx.lineCap="round",s.ctx.lineJoin="miter",s.ctx.textAlign="left"},s.resizeCanvas=(e,t)=>{e==i.w&&t==i.h||a(e,t)},s._pixelDensity=1,s.displayDensity=()=>window.devicePixelRatio,s.pixelDensity=e=>e&&e!=s._pixelDensity?(s._pixelDensity=e,a(i.w,i.h),e):s._pixelDensity,"image"!=s._scope)&&(s.fullscreen=e=>{if(void 0===e)return document.fullscreenElement;e?document.body.requestFullscreen():document.body.exitFullscreen()},s.flexibleCanvas=(e=400)=>{e?(s._da=i.width/(e*s._pixelDensity),n.width=s._dau=e,n.height=i.h/i.w*e):s._da=0},s.translate=(e,t)=>{s._da&&(e*=s._da,t*=s._da),s.ctx.translate(e,t)},s.rotate=e=>{"degrees"==s._angleMode&&(e=s.radians(e)),s.ctx.rotate(e)},s.scale=(e,t)=>{s.ctx.scale(e,t??=e)},s.opacity=e=>s.ctx.globalAlpha=e,s.applyMatrix=(e,t,a,o,r,n)=>s.ctx.transform(e,t,a,o,r,n),s.shearX=e=>s.ctx.transform(1,0,s.tan(e),1,0,0),s.shearY=e=>s.ctx.transform(1,s.tan(e),0,1,0,0),s.resetMatrix=()=>{s.ctx.resetTransform(),s.ctx.scale(s._pixelDensity,s._pixelDensity)},s._styleNames=["_doStroke","_doFill","_strokeSet","_fillSet","_tint","_imageMode","_rectMode","_ellipseMode","_textFont","_textLeading","_leadingSet","_textSize","_textAlign","_textBaseline","_textStyle","_textWrap"],s._styles=[],s.push=s.pushMatrix=()=>{s.ctx.save();var e,t={};for(e of s._styleNames)t[e]=s[e];s._styles.push(t)},s.pop=s.popMatrix=()=>{s.ctx.restore();var e,t=s._styles.pop();for(e of s._styleNames)s[e]=t[e]},s.createCapture=e=>{var t=document.createElement("video");return t.playsinline="playsinline",t.autoplay="autoplay",navigator.mediaDevices.getUserMedia(e).then(e=>{t.srcObject=e}),t.style.position="absolute",t.style.opacity=1e-5,t.style.zIndex=-1e3,document.body.append(t),t},s.createGraphics=function(e,t,a){var o=new Q5("graphics");return(a??={}).alpha??=!0,a.colorSpace??=s.canvas.colorSpace,o._createCanvas.call(s,e,t,a),o},window)&&"graphics"!=s._scope&&window.addEventListener("resize",()=>{s._shouldResize=!0,n.windowWidth=window.innerWidth,n.windowHeight=window.innerHeight,n.deviceOrientation=window.screen?.orientation?.type})},Q5.canvasOptions={alpha:!1,colorSpace:"display-p3"},window.matchMedia&&matchMedia("(dynamic-range: high) and (color-gamut: p3)").matches?Q5.supportsHDR=!0:Q5.canvasOptions.colorSpace="srgb",Q5.modules.q2d_drawing=u=>{u.CHORD=0,u.PIE=1,u.OPEN=2,u.RADIUS="radius",u.CORNER="corner",u.CORNERS="corners",u.ROUND="round",u.SQUARE="butt",u.PROJECT="square",u.MITER="miter",u.BEVEL="bevel",u.CLOSE=1,u.CENTER="center",u.LEFT="left",u.RIGHT="right",u.TOP="top",u.BOTTOM="bottom",u.LANDSCAPE="landscape",u.PORTRAIT="portrait",u.BLEND="source-over",u.REMOVE="destination-out",u.ADD="lighter",u.DARKEST="darken",u.LIGHTEST="lighten",u.DIFFERENCE="difference",u.SUBTRACT="subtract",u.EXCLUSION="exclusion",u.MULTIPLY="multiply",u.SCREEN="screen",u.REPLACE="copy",u.OVERLAY="overlay",u.HARD_LIGHT="hard-light",u.SOFT_LIGHT="soft-light",u.DODGE="color-dodge",u.BURN="color-burn",u._doStroke=!0,u._doFill=!0,u._strokeSet=!1,u._fillSet=!1,u._ellipseMode=u.CENTER,u._rectMode=u.CORNER,u._curveDetail=20;let n=!(u._curveAlpha=0),s=[];function _(){u._doFill&&u.ctx.fill(),u._doStroke&&u.ctx.stroke()}function l(t,a,o,r,n,s,e,i){if(u._doFill||u._doStroke){var l="degrees"==u._angleMode,c=l?360:u.TAU;if((n%=c)<0&&(n+=c),(s%=c)<0&&(s+=c),0!=n||0!=s){if(s<n&&([n,s]=[s,n]),u.ctx.beginPath(),o==r)l&&(n=u.radians(n),s=u.radians(s)),u.ctx.arc(t,a,o/2,n,s);else{for(let e=0;e<i+1;e++){var d=e/i,d=u.lerp(n,s,d),h=u.cos(d)*o/2,d=u.sin(d)*r/2;u.ctx[e?"lineTo":"moveTo"](t+h,a+d)}e==u.CHORD?u.ctx.closePath():e==u.PIE&&(u.ctx.lineTo(t,a),u.ctx.closePath())}_()}}}function r(e,t,a,o){(u._doFill||u._doStroke)&&(u._da&&(e*=u._da,t*=u._da,a*=u._da,o*=u._da),u.ctx.beginPath(),u.ctx.ellipse(e,t,a/2,o/2,0,0,u.TAU),_())}function p(e,t,a,o,r,n,s,i){if(u._doFill||u._doStroke){if(void 0===r)return h=e,l=t,c=a,d=o,u._da&&(h*=u._da,l*=u._da,c*=u._da,d*=u._da),u.ctx.beginPath(),u.ctx.rect(h,l,c,d),void _();var l,c,d;if(void 0===n)return p(e,t,a,o,r,r,r,r);u._da&&(e*=u._da,t*=u._da,a*=u._da,o*=u._da,r*=u._da,n*=u._da,i*=u._da,s*=u._da);var h=Math.min(Math.abs(o),Math.abs(a))/2;r=Math.min(h,r),n=Math.min(h,n),i=Math.min(h,i),s=Math.min(h,s),u.ctx.beginPath(),u.ctx.moveTo(e+r,t),u.ctx.arcTo(e+a,t,e+a,t+o,n),u.ctx.arcTo(e+a,t+o,e,t+o,s),u.ctx.arcTo(e,t+o,e,t,i),u.ctx.arcTo(e,t,e+a,t,r),u.ctx.closePath(),_()}}function i(){s=[]}u.strokeWeight=e=>{e||(u._doStroke=!1),u._da&&(e*=u._da),u.ctx.lineWidth=e||1e-4},u.stroke=function(e){if(u._doStroke=!0,u._strokeSet=!0,Q5.Color&&(e._q5Color||"string"==typeof e?u._namedColors[e]&&(e=u.color(...u._namedColors[e])):e=u.color(...arguments),e.a<=0))return u._doStroke=!1;u.ctx.strokeStyle=e.toString()},u.noStroke=()=>u._doStroke=!1,u.fill=function(e){if(u._doFill=!0,u._fillSet=!0,Q5.Color&&(e._q5Color||"string"==typeof e?u._namedColors[e]&&(e=u.color(...u._namedColors[e])):e=u.color(...arguments),e.a<=0))return u._doFill=!1;u.ctx.fillStyle=e.toString()},u.noFill=()=>u._doFill=!1,u.blendMode=e=>u.ctx.globalCompositeOperation=e,u.strokeCap=e=>u.ctx.lineCap=e,u.strokeJoin=e=>u.ctx.lineJoin=e,u.ellipseMode=e=>u._ellipseMode=e,u.rectMode=e=>u._rectMode=e,u.curveDetail=e=>u._curveDetail=e,u.curveAlpha=e=>u._curveAlpha=e,u.curveTightness=e=>u._curveAlpha=e,u.clear=()=>{u.ctx.clearRect(0,0,u.canvas.width,u.canvas.height)},u.background=function(e){if(e.canvas)return u.image(e,0,0,u.width,u.height);u.ctx.save(),u.ctx.resetTransform(),Q5.Color&&(e._q5Color||"string"==typeof e?u._namedColors[e]&&(e=u.color(...u._namedColors[e])):e=u.color(...arguments)),u.ctx.fillStyle=e.toString(),u.ctx.fillRect(0,0,u.canvas.width,u.canvas.height),u.ctx.restore()},u.line=(e,t,a,o)=>{u._doStroke&&(u._da&&(e*=u._da,t*=u._da,a*=u._da,o*=u._da),u.ctx.beginPath(),u.ctx.moveTo(e,t),u.ctx.lineTo(a,o),u.ctx.stroke())},u.arc=(e,t,a,o,r,n,s,i=25)=>{if(r==n)return u.ellipse(e,t,a,o);s??=u.PIE,u._ellipseMode==u.CENTER?l(e,t,a,o,r,n,s,i):u._ellipseMode==u.RADIUS?l(e,t,2*a,2*o,r,n,s,i):u._ellipseMode==u.CORNER?l(e+a/2,t+o/2,a,o,r,n,s,i):u._ellipseMode==u.CORNERS&&l((e+a)/2,(t+o)/2,a-e,o-t,r,n,s,i)},u.ellipse=(e,t,a,o)=>{o??=a,u._ellipseMode==u.CENTER?r(e,t,a,o):u._ellipseMode==u.RADIUS?r(e,t,2*a,2*o):u._ellipseMode==u.CORNER?r(e+a/2,t+o/2,a,o):u._ellipseMode==u.CORNERS&&r((e+a)/2,(t+o)/2,a-e,o-t)},u.circle=(e,t,a)=>{u._ellipseMode==u.CENTER?(u._da&&(e*=u._da,t*=u._da,a*=u._da),u.ctx.beginPath(),u.ctx.arc(e,t,a/2,0,u.TAU),_()):u.ellipse(e,t,a,a)},u.point=(e,t)=>{e.x&&(t=e.y,e=e.x),u._da&&(e*=u._da,t*=u._da),u.ctx.save(),u.ctx.beginPath(),u.ctx.arc(e,t,u.ctx.lineWidth/2,0,u.TAU),u.ctx.fillStyle=u.ctx.strokeStyle,u.ctx.fill(),u.ctx.restore()},u.rect=(e,t,a,o=a,r,n,s,i)=>{u._rectMode==u.CENTER?p(e-a/2,t-o/2,a,o,r,n,s,i):u._rectMode==u.RADIUS?p(e-a,t-o,2*a,2*o,r,n,s,i):u._rectMode==u.CORNER?p(e,t,a,o,r,n,s,i):u._rectMode==u.CORNERS&&p(e,t,a-e,o-t,r,n,s,i)},u.square=(e,t,a,o,r,n,s)=>u.rect(e,t,a,a,o,r,n,s),u.beginShape=()=>{i(),u.ctx.beginPath(),n=!0},u.beginContour=()=>{u.ctx.closePath(),i(),n=!0},u.endContour=()=>{i(),n=!0},u.vertex=(e,t)=>{u._da&&(e*=u._da,t*=u._da),i(),n?u.ctx.moveTo(e,t):u.ctx.lineTo(e,t),n=!1},u.bezierVertex=(e,t,a,o,r,n)=>{u._da&&(e*=u._da,t*=u._da,a*=u._da,o*=u._da,r*=u._da,n*=u._da),i(),u.ctx.bezierCurveTo(e,t,a,o,r,n)},u.quadraticVertex=(e,t,a,o)=>{u._da&&(e*=u._da,t*=u._da,a*=u._da,o*=u._da),i(),u.ctx.quadraticCurveTo(e,t,a,o)},u.bezier=(e,t,a,o,r,n,s,i)=>{u.beginShape(),u.vertex(e,t),u.bezierVertex(a,o,r,n,s,i),u.endShape()},u.triangle=(e,t,a,o,r,n)=>{u.beginShape(),u.vertex(e,t),u.vertex(a,o),u.vertex(r,n),u.endShape(u.CLOSE)},u.quad=(e,t,a,o,r,n,s,i)=>{u.beginShape(),u.vertex(e,t),u.vertex(a,o),u.vertex(r,n),u.vertex(s,i),u.endShape(u.CLOSE)},u.endShape=e=>{i(),e&&u.ctx.closePath(),_()},u.curveVertex=(e,t)=>{if(u._da&&(e*=u._da,t*=u._da),s.push([e,t]),!(s.length<4)){var e=s.at(-4),t=s.at(-3),a=s.at(-2),o=s.at(-1),r=function(t,a,o,r,n,s,i,l,c,e){function d(e,t,a,o,r,n){o=Math.pow(o-t,2)+Math.pow(r-a,2);return Math.pow(o,.5*n)+e}var h=[],u=d(0,t,a,o,r,e),_=d(u,o,r,n,s,e),p=d(_,n,s,i,l,e);for(let e=0;e<c;e++){var g=u+e/(c-1)*(_-u),x=[(u-g)/+u,+g/+u,(_-g)/(_-u),(g-u)/(_-u),(p-g)/(p-_),(g-_)/(p-_),(_-g)/+_,+g/+_,(p-g)/(p-u),(g-u)/(p-u)];for(let e=0;e<x.length;e+=2)isNaN(x[e])&&(x[e]=1,x[e+1]=0),isFinite(x[e])||(0<x[e]?(x[e]=1,x[e+1]=0):(x[e]=0,x[e+1]=1));var g=t*x[0]+o*x[1],m=a*x[0]+r*x[1],v=o*x[2]+n*x[3],f=r*x[2]+s*x[3],y=n*x[4]+i*x[5],w=s*x[4]+l*x[5],g=g*x[6]+v*x[7],m=m*x[6]+f*x[7],v=v*x[8]+y*x[9],y=f*x[8]+w*x[9],f=g*x[2]+v*x[3],w=m*x[2]+y*x[3];h.push([f,w])}return h}(...e,...t,...a,...o,u._curveDetail,u._curveAlpha);for(let e=0;e<r.length;e++)n?u.ctx.moveTo(...r[e]):u.ctx.lineTo(...r[e]),n=!1}},u.curve=(e,t,a,o,r,n,s,i)=>{u.beginShape(),u.curveVertex(e,t),u.curveVertex(a,o),u.curveVertex(r,n),u.curveVertex(s,i),u.endShape()},u.curvePoint=(e,t,a,o,r)=>{var n=r*r*r,s=r*r;return e*(-.5*n+s-.5*r)+t*(1.5*n-2.5*s+1)+a*(-1.5*n+2*s+.5*r)+o*(.5*n-.5*s)},u.bezierPoint=(e,t,a,o,r)=>{var n=1-r;return Math.pow(n,3)*e+3*Math.pow(n,2)*r*t+3*n*Math.pow(r,2)*a+Math.pow(r,3)*o},u.curveTangent=(e,t,a,o,r)=>{var n=r*r;return e*(-3*n/2+2*r-.5)+t*(9*n/2-5*r)+a*(-9*n/2+4*r+.5)+o*(3*n/2-r)},u.bezierTangent=(e,t,a,o,r)=>{var n=1-r;return 3*o*Math.pow(r,2)-3*a*Math.pow(r,2)+6*a*n*r-6*t*n*r+3*t*Math.pow(n,2)-3*e*Math.pow(n,2)},u.erase=function(e=255,t=255){u.ctx.save(),u.ctx.globalCompositeOperation="destination-out",u.ctx.fillStyle=`rgba(0, 0, 0, ${e/255})`,u.ctx.strokeStyle=`rgba(0, 0, 0, ${t/255})`},u.noErase=function(){u.ctx.globalCompositeOperation="source-over",u.ctx.restore()},u.inFill=(e,t)=>{var a=u._pixelDensity;return u.ctx.isPointInPath(e*a,t*a)},u.inStroke=(e,t)=>{var a=u._pixelDensity;return u.ctx.isPointInStroke(e*a,t*a)}},Q5.modules.q2d_image=(u,s)=>{u.createImage=(e,t,a)=>((a??={}).alpha??=!0,a.colorSpace??=u.canvas.colorSpace||Q5.canvasOptions.colorSpace,new Q5.Image(e,t,a));let e=u._tint=null,a=null,_=null;function o(e,t){t??=e||u.canvas.height,e??=u.canvas.width,(a=null==a?new u._OffscreenCanvas(e,t).getContext("2d",{colorSpace:u.canvas.colorSpace}):a).canvas.width==e&&a.canvas.height==t||(a.canvas.width=e,a.canvas.height=t)}function r(e){a.clearRect(0,0,a.canvas.width,a.canvas.height),a.filter=e,a.drawImage(u.canvas,0,0),u.ctx.save(),u.ctx.resetTransform(),u.ctx.clearRect(0,0,u.canvas.width,u.canvas.height),u.ctx.drawImage(a.canvas,0,0),u.ctx.restore()}u._softFilter=()=>{throw"Load q5-2d-soft-filters.js to use software filters."},u.filter=(e,t)=>{if(!u.ctx.filter)return u._softFilter(e,t);o(),"string"==typeof e?r(e):e==Q5.THRESHOLD?(t??=.5,t=Math.max(t,1e-5),r(`saturate(0%) brightness(${Math.floor(.5/t*100)}%) contrast(1000000%)`)):e==Q5.GRAY?r("saturate(0%)"):e==Q5.OPAQUE?(a.fillStyle="black",a.fillRect(0,0,a.canvas.width,a.canvas.height),a.drawImage(u.canvas,0,0),u.ctx.save(),u.ctx.resetTransform(),u.ctx.drawImage(a.canvas,0,0),u.ctx.restore()):e==Q5.INVERT?r("invert(100%)"):e==Q5.BLUR?r(`blur(${Math.ceil(t*u._pixelDensity)||1}px)`):u._softFilter(e,t)},u.resize=(e,t)=>{o(),a.drawImage(u.canvas,0,0),s.width=e,s.height=t,u.canvas.width=e*u._pixelDensity,u.canvas.height=t*u._pixelDensity,u.ctx.save(),u.ctx.resetTransform(),u.ctx.clearRect(0,0,u.canvas.width,u.canvas.height),u.ctx.drawImage(a.canvas,0,0,u.canvas.width,u.canvas.height),u.ctx.restore()},u.trim=()=>{var a=u._pixelDensity||1,o=u.ctx.getImageData(0,0,u.width*a,u.height*a).data;let r=u.width,n=0,s=u.height,i=0;for(let t=0;t<u.height*a;t++)for(let e=0;e<u.width*a;e++)0!==o[3+4*(t*u.width*a+e)]&&(e<r&&(r=e),e>n&&(n=e),t<s&&(s=t),t>i)&&(i=t);return s=Math.floor(s/a),i=Math.floor(i/a),r=Math.floor(r/a),n=Math.floor(n/a),u.get(r,s,n-r+1,i-s+1)},u.mask=e=>{u.ctx.save(),u.ctx.resetTransform();var t=u.ctx.globalCompositeOperation;u.ctx.globalCompositeOperation="destination-in",u.ctx.drawImage(e.canvas,0,0),u.ctx.globalCompositeOperation=t,u.ctx.restore()},u._save=async(t,e,o)=>{if(e=e||"untitled","jpg"==(o=o||"png")||"png"==o||"webp"==o)if(t instanceof OffscreenCanvas){let a=await t.convertToBlob({type:"image/"+o});t=await new Promise(e=>{let t=new FileReader;t.onloadend=()=>e(t.result),t.readAsDataURL(a)})}else t=t.toDataURL("image/"+o);else{let e="text/plain";"json"==o&&("string"!=typeof t&&(t=JSON.stringify(t)),e="text/json"),t=new Blob([t],{type:e}),t=URL.createObjectURL(t)}var a=document.createElement("a");a.href=t,a.download=e+"."+o,a.click(),URL.revokeObjectURL(a.href)},u.save=(e,t,a)=>{if((!e||"string"==typeof e&&(!t||!a&&t.length<5))&&(a=t,t=e,e=u.canvas),a)return u._save(e,t,a);t?(t=t.split("."),u._save(e,t[0],t.at(-1))):u._save(e)},u.get=(e,t,a,o)=>{var r=u._pixelDensity||1;if(void 0!==e&&void 0===a)return n=u.ctx.getImageData(e*r,t*r,1,1).data,new u.Color(n[0],n[1],n[2],n[3]/255);e=(e||0)*r,t=(t||0)*r;var n=a=a||u.width,s=o=o||u.height,i=u.createImage(a*=r,o*=r),e=u.ctx.getImageData(e,t,a,o);return i.ctx.putImageData(e,0,0),i._pixelDensity=r,i.width=n,i.height=s,i},u.set=(a,o,r)=>{var e;if(r.canvas)e=u._tint,u._tint=null,u.image(r,a,o),u._tint=e;else{u.pixels.length||u.loadPixels();var n=u._pixelDensity||1;for(let t=0;t<n;t++)for(let e=0;e<n;e++){var s=4*((o*n+t)*u.canvas.width+a*n+e);u.pixels[s]=r.r??r.l,u.pixels[1+s]=r.g??r.c,u.pixels[2+s]=r.b??r.h,u.pixels[3+s]=r.a}}},u.loadPixels=()=>{e=u.ctx.getImageData(0,0,u.canvas.width,u.canvas.height),s.pixels=e.data},u.updatePixels=()=>{null!=e&&u.ctx.putImageData(e,0,0)},u._tinted=function(e){var t=e.a,e=(e.a=255,o(),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle=e.toString(),a.fillRect(0,0,a.canvas.width,a.canvas.height),a.globalCompositeOperation="multiply",a.drawImage(u.ctx.canvas,0,0),a.globalCompositeOperation="source-over",u.ctx.save(),u.ctx.resetTransform(),u.ctx.globalCompositeOperation);u.ctx.globalCompositeOperation="source-in",u.ctx.drawImage(a.canvas,0,0),u.ctx.globalCompositeOperation=e,u.ctx.restore(),a.globalAlpha=t/255,a.clearRect(0,0,a.canvas.width,a.canvas.height),a.drawImage(u.ctx.canvas,0,0),a.globalAlpha=1,u.ctx.save(),u.ctx.resetTransform(),u.ctx.clearRect(0,0,u.ctx.canvas.width,u.ctx.canvas.height),u.ctx.drawImage(a.canvas,0,0),u.ctx.restore()},u.smooth=()=>u.ctx.imageSmoothingEnabled=!0,u.noSmooth=()=>u.ctx.imageSmoothingEnabled=!1,"image"!=u._scope&&(u.saveCanvas=u.canvas.save=u.save,u.tint=function(e){u._tint=e._q5Color?e:u.color(...arguments)},u.noTint=()=>u._tint=null,u.imageMode=e=>u._imageMode=e,u.image=(e,t,a,o,r,n=0,s=0,i,l)=>{u._da&&(t*=u._da,a*=u._da,o*=u._da,r*=u._da,n*=u._da,s*=u._da,i*=u._da,l*=u._da);let c=e.canvas||e;Q5._createNodeJSCanvas&&(c=c.context.canvas),e.canvas&&null!=u._tint&&(h=e.canvas.width,d=e.canvas.height,d??=h||u.canvas.height,h??=u.canvas.width,(_=null==_?new u._OffscreenCanvas(h,d).getContext("2d",{colorSpace:u.canvas.colorSpace}):_).canvas.width==h&&_.canvas.height==d||(_.canvas.width=h,_.canvas.height=d),_.drawImage(e.canvas,0,0),e._tinted(u._tint)),o??=e.width||e.videoWidth,r??=e.height||e.videoHeight,"center"==u._imageMode&&(t-=.5*o,a-=.5*r);var d,h=e._pixelDensity||1;i?i*=h:i=c.width||c.videoWidth,l?l*=h:l=c.height||c.videoHeight,u.ctx.drawImage(c,n*h,s*h,i,l,t,a,o,r),e._q5&&u._tint&&((d=e.ctx).save(),d.resetTransform(),d.clearRect(0,0,d.canvas.width,d.canvas.height),d.drawImage(_.canvas,0,0),d.restore())},u.loadImage=function(t,a,e){if(t.canvas)return t;if("gif"==t.slice(-3).toLowerCase())throw new Error("q5 doesn't support GIFs due to their impact on performance. Use a video or animation instead.");s._preloadCount++;var o=[...arguments].at(-1);let r=u.createImage(1,1,"object"==typeof o?o:null);function n(e){var t=r.ctx;r.width=t.canvas.width=e.naturalWidth||e.width,r.height=t.canvas.height=e.naturalHeight||e.height,t.drawImage(e,0,0),s._preloadCount--,a&&a(r)}if(Q5._nodejs&&global.CairoCanvas)global.CairoCanvas.loadImage(t).then(n).catch(e=>{throw s._preloadCount--,e});else{let e=new window.Image;e.src=t,e.crossOrigin="Anonymous",e._pixelDensity=1,e.onload=()=>n(e),e.onerror=e=>{throw s._preloadCount--,e}}return r})},Q5.imageModules=["q2d_canvas","q2d_image"];class _Q5Image{constructor(e,t,a){var o,r=this;r._scope="image",r.canvas=r.ctx=r.drawingContext=null,r.pixels=[];for(o of Q5.imageModules)Q5.modules[o](r,r);delete this.createCanvas,this._createCanvas(e,t,"2d",a),this._loop=!1}get w(){return this.width}get h(){return this.height}}Q5.Image??=_Q5Image,Q5.THRESHOLD=1,Q5.GRAY=2,Q5.OPAQUE=3,Q5.INVERT=4,Q5.POSTERIZE=5,Q5.DILATE=6,Q5.ERODE=7,Q5.BLUR=8,Q5.modules.q2d_soft_filters=x=>{let m=null;function t(){var e=x.canvas.width*x.canvas.height*4;m&&e==m.length||(m=new Uint8ClampedArray(e))}function o(){x._filters=[],x._filters[Q5.THRESHOLD]=(t,a)=>{void 0===a?a=127.5:a*=255;for(let e=0;e<t.length;e+=4){var o=.2126*t[e]+.7152*t[e+1]+.0722*t[e+2];t[e]=t[e+1]=t[e+2]=a<=o?255:0}},x._filters[Q5.GRAY]=t=>{for(let e=0;e<t.length;e+=4){var a=.2126*t[e]+.7152*t[e+1]+.0722*t[e+2];t[e]=t[e+1]=t[e+2]=a}},x._filters[Q5.OPAQUE]=t=>{for(let e=0;e<t.length;e+=4)t[e+3]=255},x._filters[Q5.INVERT]=t=>{for(let e=0;e<t.length;e+=4)t[e]=255-t[e],t[e+1]=255-t[e+1],t[e+2]=255-t[e+2]},x._filters[Q5.POSTERIZE]=(t,a=4)=>{var o=a-1;for(let e=0;e<t.length;e+=4)t[e]=255*(t[e]*a>>8)/o,t[e+1]=255*(t[e+1]*a>>8)/o,t[e+2]=255*(t[e+2]*a>>8)/o},x._filters[Q5.DILATE]=a=>{t(),m.set(a);var[o,r]=[x.canvas.width,x.canvas.height];for(let t=0;t<r;t++)for(let e=0;e<o;e++){var n=4*Math.max(e-1,0),s=4*Math.min(e+1,o-1),i=4*Math.max(t-1,0)*o,l=4*Math.min(t+1,r-1)*o,c=4*t*o,d=4*e;for(let e=0;e<4;e++){var h=e+i,u=e+l,_=e+c;a[c+d+e]=Math.max(m[h+d],m[_+n],m[_+d],m[_+s],m[u+d])}}},x._filters[Q5.ERODE]=a=>{t(),m.set(a);var[o,r]=[x.canvas.width,x.canvas.height];for(let t=0;t<r;t++)for(let e=0;e<o;e++){var n=4*Math.max(e-1,0),s=4*Math.min(e+1,o-1),i=4*Math.max(t-1,0)*o,l=4*Math.min(t+1,r-1)*o,c=4*t*o,d=4*e;for(let e=0;e<4;e++){var h=e+i,u=e+l,_=e+c;a[c+d+e]=Math.min(m[h+d],m[_+n],m[_+d],m[_+s],m[u+d])}}},x._filters[Q5.BLUR]=(e,i)=>{i=i||1,i=Math.floor(i*x._pixelDensity),t(),m.set(e);var l=2*i+1;var c=function(t){var a=new Float32Array(t),o=.3*i+.8,r=o*o*2;for(let e=0;e<t;e++){var n=e-t/2,n=Math.exp(-n*n/r)/(2.5066282746*o);a[e]=n}return a}(l),[d,h]=[x.canvas.width,x.canvas.height];for(let s=0;s<h;s++)for(let n=0;n<d;n++){let t=0,a=0,o=0,r=0;for(let e=0;e<l;e++){var u=Math.min(Math.max(n-i+e,0),d-1),u=4*(s*d+u);t+=m[u]*c[e],a+=m[1+u]*c[e],o+=m[2+u]*c[e],r+=m[3+u]*c[e]}var _=4*(s*d+n);e[_]=t,e[1+_]=a,e[2+_]=o,e[3+_]=r}m.set(e);for(let s=0;s<h;s++)for(let n=0;n<d;n++){let t=0,a=0,o=0,r=0;for(let e=0;e<l;e++){var p=4*(Math.min(Math.max(s-i+e,0),h-1)*d+n);t+=m[p]*c[e],a+=m[1+p]*c[e],o+=m[2+p]*c[e],r+=m[3+p]*c[e]}var g=4*(s*d+n);e[g]=t,e[1+g]=a,e[2+g]=o,e[3+g]=r}}}x._softFilter=(e,t)=>{x._filters||o();var a=x.ctx.getImageData(0,0,x.canvas.width,x.canvas.height);x._filters[e](a.data,t),x.ctx.putImageData(a,0,0)}},Q5.modules.q2d_text=(g,o)=>{g.NORMAL="normal",g.ITALIC="italic",g.BOLD="bold",g.BOLDITALIC="italic bold",g.CENTER="center",g.LEFT="left",g.RIGHT="right",g.TOP="top",g.BOTTOM="bottom",g.BASELINE="alphabetic",g._textFont="sans-serif",g._textSize=12,g._textLeading=15,g._textLeadDiff=3,g._textStyle="normal",g.loadFont=(e,t)=>{o._preloadCount++;let a=e.split("/").pop().split(".")[0].replace(" ","");e=new FontFace(a,`url(${e})`);return document.fonts.add(e),e.load().then(()=>{o._preloadCount--,t&&t(a)}),a},g.textFont=e=>g._textFont=e,g.textSize=e=>{if(void 0===e)return g._textSize;g._da&&(e*=g._da),g._textSize=e,g._leadingSet||(g._textLeading=1.25*e,g._textLeadDiff=g._textLeading-e)},g.textLeading=e=>{if(void 0===e)return g._textLeading;g._da&&(e*=g._da),g._textLeading=e,g._textLeadDiff=e-g._textSize,g._leadingSet=!0},g.textStyle=e=>g._textStyle=e,g.textAlign=(e,t)=>{g.ctx.textAlign=e,t&&(g.ctx.textBaseline=t==g.CENTER?"middle":t)},g.textWidth=e=>(g.ctx.font=`${g._textStyle} ${g._textSize}px `+g._textFont,g.ctx.measureText(e).width),g.textAscent=e=>(g.ctx.font=`${g._textStyle} ${g._textSize}px `+g._textFont,g.ctx.measureText(e).actualBoundingBoxAscent),g.textDescent=e=>(g.ctx.font=`${g._textStyle} ${g._textSize}px `+g._textFont,g.ctx.measureText(e).actualBoundingBoxDescent),g._textCache=!!Q5.Image,g._TimedCache=class extends Map{constructor(){super(),this.maxSize=500}set(e,t){t.lastAccessed=Date.now(),super.set(e,t),this.size>this.maxSize&&this.gc()}get(e){e=super.get(e);return e&&(e.lastAccessed=Date.now()),e}gc(){let e=1/0,t,a=0;for(var[o,r]of this.entries())r.lastAccessed<e&&(e=r.lastAccessed,t=a),a++;a=t;for(var n of this.keys()){if(0==a){t=n;break}a--}this.delete(t)}},g._tic=new g._TimedCache,g.textCache=(e,t)=>(t&&(g._tic.maxSize=t),void 0!==e&&(g._textCache=e),g._textCache),g._genTextImageKey=(e,t,a)=>e.slice(0,200)+g._textStyle+g._textSize+g._textFont+(g._doFill?g.ctx.fillStyle:"")+"_"+(g._doStroke&&g._strokeSet?g.ctx.lineWidth+g.ctx.strokeStyle+"_":"")+(t||"")+(a?"x"+a:""),g.createTextImage=(e,t,a)=>{var o=g._textCache,e=(g._textCache=!0,g._genTextImage=!0,g.text(e,0,0,t,a),g._genTextImage=!1,g._genTextImageKey(e,t,a));return g._textCache=o,g._tic.get(e)},g.text=(l,c,d,h,u)=>{if(void 0!==l&&(l=l.toString(),g._da&&(c*=g._da,d*=g._da),g._doFill||g._doStroke)){let t,e,a,o,r,n,s,i;var _=g.ctx.getTransform(),_=g._genTextImage||g._textCache&&(0!=_.b||0!=_.c);if(_){if(o=g._genTextImageKey(l,h,u),(e=g._tic.get(o))&&!g._genTextImage)return void g.textImage(e,c,d);a=g.createGraphics.call(g,1,1),t=a.ctx}else t=g.ctx,r=c,n=d;t.font=`${g._textStyle} ${g._textSize}px `+g._textFont;var p=l.split("\n"),h=(_&&(r=0,n=g._textLeading*p.length,h=t.measureText(" "),s=h.fontBoundingBoxAscent,i=h.fontBoundingBoxDescent,u??=n+i,a.resizeCanvas(Math.ceil(t.measureText(l).width),Math.ceil(u)),t.fillStyle=g.ctx.fillStyle,t.strokeStyle=g.ctx.strokeStyle,t.lineWidth=g.ctx.lineWidth),t.fillStyle);g._fillSet||(t.fillStyle="black");for(let e=0;e<p.length&&(g._doStroke&&g._strokeSet&&t.strokeText(p[e],r,n),g._doFill&&t.fillText(p[e],r,n),!((n+=g._textLeading)>u));e++);g._fillSet||(t.fillStyle=h),_&&((e=a.get())._ascent=s,e._descent=i,g._tic.set(o,e),g._genTextImage||g.textImage(e,c,d))}},g.textImage=(e,t,a)=>{var o=g._imageMode;g._imageMode="corner","center"==g.ctx.textAlign?t-=.5*e.width:"right"==g.ctx.textAlign&&(t-=e.width),"alphabetic"==g.ctx.textBaseline&&(a-=g._textLeading),"middle"==g.ctx.textBaseline?a-=e._descent+.5*e._ascent+g._textLeadDiff:"bottom"==g.ctx.textBaseline?a-=e._ascent+e._descent+g._textLeadDiff:"top"==g.ctx.textBaseline&&(a-=e._descent+g._textLeadDiff),g.image(e,t,a),g._imageMode=o},g.nf=(e,t,a)=>{var o=e<0,e=(e=Math.abs(e)).toFixed(a).split(".");e[0]=e[0].padStart(t,"0");let r=e.join(".");return r=o?"-"+r:r}},Q5.modules.ai=e=>{e.askAI=(e="")=>{throw Error("Ask AI ✨ "+e)},e._aiErrorAssistance=async r=>{var n=r.message?.includes("Ask AI ✨");if(n||console.error(r),!Q5.disableFriendlyErrors){!n&&Q5.errorTolerant||e.noLoop();var s=r.stack?.split("\n");if(r.stack&&!(s.length<=1)){let e=1,t="(";for(-1==navigator.userAgent.indexOf("Chrome")&&(e=0,t="@");0<=s[e].indexOf("q5.js:");)e++;let a=s[e].split(t).at(-1),o=(a=a.split(":"),parseInt(a.at(-2)));n&&o++;var i=a.slice(0,-2).join(":"),l=i.split("/").at(-1);try{var c=(await(await fetch(i)).text()).split("\n"),d=c[o-1].trim();let e="",t=1;for(;e.length<1600&&(0<=o-t&&(e=c[o-t].trim()+"\n"+e),o+t<c.length);)e+=c[o+t].trim()+"\n",t++;var h="https://chatgpt.com/?q=q5.js+"+(n&&10<r.message.length?r.message.slice(10):"Whats+wrong+with+this+line%3F+short+answer")+(n?"":"%0A%0A"+encodeURIComponent(r.name+": "+r.message))+"%0A%0ALine%3A+"+encodeURIComponent(d)+"%0A%0AExcerpt+for+context%3A%0A%0A"+encodeURIComponent(e);n||console.log("Error in "+l+" on line "+o+":\n\n"+d),console.warn("Ask AI ✨ "+h),n&&window.open(h,"_blank")}catch(e){}}}}},Q5.modules.color=(s,t)=>{s.RGB=s.RGBA=s._colorMode="rgb",s.OKLCH="oklch",Q5.supportsHDR?s.Color=Q5.ColorRGBA_P3:s.Color=Q5.ColorRGBA,s.colorMode=e=>{"oklch"==(s._colorMode=e)?t.Color=Q5.ColorOKLCH:"rgb"==e?"srgb"==s.canvas.colorSpace?t.Color=Q5.ColorRGBA:t.Color=Q5.ColorRGBA_P3:"srgb"==e&&(t.Color=Q5.ColorRGBA,s._colorMode="rgb")},s._namedColors={aqua:[0,255,255],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],crimson:[220,20,60],cyan:[0,255,255],darkviolet:[148,0,211],gold:[255,215,0],green:[0,128,0],gray:[128,128,128],grey:[128,128,128],hotpink:[255,105,180],indigo:[75,0,130],khaki:[240,230,140],lightgreen:[144,238,144],lime:[0,255,0],magenta:[255,0,255],navy:[0,0,128],orange:[255,165,0],olive:[128,128,0],peachpuff:[255,218,185],pink:[255,192,203],purple:[128,0,128],red:[255,0,0],skyblue:[135,206,235],tan:[210,180,140],turquoise:[64,224,208],transparent:[0,0,0,0],white:[255,255,255],violet:[238,130,238],yellow:[255,255,0]},s.color=function(e,t,a,o){var r=s.Color;if(e._q5Color)return new r(...e.levels);var n=arguments;if(1==n.length){if("string"==typeof e)return"#"==e[0]?e.length<=5?new r(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),4==e.length?null:parseInt(e[4]+e[4],16)):new r(parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),7==e.length?null:parseInt(e.slice(7,9),16)):s._namedColors[e]?new r(...s._namedColors[e]):(console.error("q5 can't parse color: "+e+"\nOnly numeric input, hex, and common named colors are supported."),new r(0,0,0));if(Array.isArray(e))return new r(...e)}if("rgb"==s._colorMode){if(1==n.length)return new r(e,e,e);if(2==n.length)return new r(e,e,e,t)}return 3==n.length?new r(e,t,a):4==n.length?new r(e,t,a,o):void 0},s.red=e=>e.r,s.green=e=>e.g,s.blue=e=>e.b,s.alpha=e=>e.a,s.lightness=e=>100*(.2126*e.r+.7152*e.g+.0722*e.b)/255,s.lerpColor=(a,o,r)=>{if("rgb"==s._colorMode)return new s.Color(s.constrain(s.lerp(a.r,o.r,r),0,255),s.constrain(s.lerp(a.g,o.g,r),0,255),s.constrain(s.lerp(a.b,o.b,r),0,255),s.constrain(s.lerp(a.a,o.a,r),0,255));{let e=o.h-a.h,t=(180<e&&(e-=360),e<-180&&(e+=360),a.h+r*e);return t<0&&(t+=360),360<t&&(t-=360),new s.Color(s.constrain(s.lerp(a.l,o.l,r),0,100),s.constrain(s.lerp(a.c,o.c,r),0,100),t,s.constrain(s.lerp(a.a,o.a,r),0,255))}}},Q5.Color=class{constructor(){this._q5Color=!0}},Q5.ColorOKLCH=class extends Q5.Color{constructor(e,t,a,o){super(),this.l=e,this.c=t,this.h=a,this.a=o??1}toString(){return`oklch(${this.l} ${this.c} ${this.h} / ${this.a})`}},Q5.ColorRGBA=class extends Q5.Color{constructor(e,t,a,o){super(),this.r=e,this.g=t,this.b=a,this.a=o??255}setRed(e){this.r=e}setGreen(e){this.g=e}setBlue(e){this.b=e}setAlpha(e){this.a=e}get levels(){return[this.r,this.g,this.b,this.a]}toString(){return`rgb(${this.r} ${this.g} ${this.b} / ${this.a/255})`}},Q5.ColorRGBA_P3=class extends Q5.ColorRGBA{constructor(e,t,a,o){super(e,t,a,o),this._edited=!0}get r(){return this._r}set r(e){this._r=e,this._edited=!0}get g(){return this._g}set g(e){this._g=e,this._edited=!0}get b(){return this._b}set b(e){this._b=e,this._edited=!0}get a(){return this._a}set a(e){this._a=e,this._edited=!0}toString(){var e,t,a,o;return this._edited&&(e=(this._r/255).toFixed(3),t=(this._g/255).toFixed(3),a=(this._b/255).toFixed(3),o=(this._a/255).toFixed(3),this._css=`color(display-p3 ${e} ${t} ${a} / ${o})`,this._edited=!1),this._css}},Q5.modules.display=r=>{if(r.canvas&&"graphics"!=r._scope){let o=r.canvas;0!=Q5._instanceCount||Q5._nodejs||document.head.insertAdjacentHTML("beforeend",`<style>
html, body {
	margin: 0;
	padding: 0;
}
.q5Canvas {
	outline: none;
	-webkit-touch-callout: none;
	-webkit-text-size-adjust: none;
	-webkit-user-select: none;
	overscroll-behavior: none;
}
.q5-pixelated {
	image-rendering: pixelated;
	font-smooth: never;
	-webkit-font-smoothing: none;
}
.q5-centered,
.q5-maxed,
.q5-fullscreen {
  display: flex;
	align-items: center;
	justify-content: center;
}
main.q5-centered,
main.q5-maxed,
.q5-fullscreen {
	height: 100vh;
}
main {
	overscroll-behavior: none;
}
</style>`),r._adjustDisplay=()=>{var e=o.style;let t=o.parentElement;e&&t&&o.displayMode&&("pixelated"==o.renderQuality&&(o.classList.add("q5-pixelated"),r.pixelDensity(1),r.noSmooth&&r.noSmooth(),r.textFont)&&r.textFont("monospace"),"normal"==o.displayMode?(t.classList.remove("q5-centered","q5-maxed","q5-fullscreen"),e.width=o.w*o.displayScale+"px",e.height=o.h*o.displayScale+"px"):(t.classList.add("q5-"+o.displayMode),t=t.getBoundingClientRect(),o.w/o.h>t.width/t.height?("centered"==o.displayMode?(e.width=o.w*o.displayScale+"px",e.maxWidth="100%"):e.width="100%",e.height="auto",e.maxHeight=""):(e.width="auto",e.maxWidth="","centered"==o.displayMode?(e.height=o.h*o.displayScale+"px",e.maxHeight="100%"):e.height="100%")))},r.displayMode=(e="normal",t="default",a=1)=>{"string"==typeof a&&(a=parseFloat(a.slice(1))),Object.assign(o,{displayMode:e,renderQuality:t,displayScale:a}),r._adjustDisplay()}}},Q5.modules.input=(r,n)=>{if("graphics"!=r._scope){r.mouseX=0,r.mouseY=0,r.pmouseX=0,r.pmouseY=0,r.touches=[],r.mouseButton=null,r.keyIsPressed=!1,r.mouseIsPressed=!1,r.key=null,r.keyCode=null,r.UP_ARROW=38,r.DOWN_ARROW=40,r.LEFT_ARROW=37,r.RIGHT_ARROW=39,r.SHIFT=16,r.TAB=9,r.BACKSPACE=8,r.ENTER=r.RETURN=13,r.ALT=r.OPTION=18,r.CONTROL=17,r.DELETE=46,r.ESCAPE=27,r.ARROW="default",r.CROSS="crosshair",r.HAND="pointer",r.MOVE="move",r.TEXT="text";let t={},a=[r.LEFT,r.CENTER,r.RIGHT];var e=r.canvas;function o(e){var t=r.canvas.getBoundingClientRect(),a=r.canvas.scrollWidth/r.width||1,o=r.canvas.scrollHeight/r.height||1;return{x:(e.clientX-t.left)/a,y:(e.clientY-t.top)/o,id:e.identifier}}r._startAudio=()=>{r.getAudioContext&&"suspended"==r.getAudioContext()?.state&&r.userStartAudio()},r._updateMouse=e=>{var t,a,o;e.changedTouches||(t=r.canvas.getBoundingClientRect(),a=r.canvas.scrollWidth/r.width||1,o=r.canvas.scrollHeight/r.height||1,n.mouseX=(e.clientX-t.left)/a,n.mouseY=(e.clientY-t.top)/o)},r._onmousedown=e=>{r._startAudio(),r._updateMouse(e),n.mouseIsPressed=!0,n.mouseButton=a[e.button],r.mousePressed(e)},r._onmousemove=e=>{r._updateMouse(e),r.mouseIsPressed?r.mouseDragged(e):r.mouseMoved(e)},r._onmouseup=e=>{r._updateMouse(e),n.mouseIsPressed=!1,r.mouseReleased(e)},r._onclick=e=>{r._updateMouse(e),n.mouseIsPressed=!0,r.mouseClicked(e),n.mouseIsPressed=!1},e.addEventListener("mousedown",e=>r._onmousedown(e)),e.addEventListener("mouseup",e=>r._onmouseup(e)),e.addEventListener("click",e=>r._onclick(e)),r.cursor=(e,t,a)=>{let o="";e.includes(".")&&(e=`url("${e}")`,o=", auto"),void 0!==t&&(e+=" "+t+" "+a),r.canvas.style.cursor=e+o},r.noCursor=()=>{r.canvas.style.cursor="none"},r.requestPointerLock=document.body?.requestPointerLock,r.exitPointerLock=document.exitPointerLock,r._onkeydown=e=>{e.repeat||(r._startAudio(),n.keyIsPressed=!0,n.key=e.key,n.keyCode=e.keyCode,t[r.keyCode]=t[r.key.toLowerCase()]=!0,r.keyPressed(e),1==e.key.length&&r.keyTyped(e))},r._onkeyup=e=>{n.keyIsPressed=!1,n.key=e.key,n.keyCode=e.keyCode,t[r.keyCode]=t[r.key.toLowerCase()]=!1,r.keyReleased(e)},r.keyIsDown=e=>!!t["string"==typeof e?e.toLowerCase():e],r._ontouchstart=e=>{r._startAudio(),n.touches=[...e.touches].map(o),r._isTouchAware||(n.mouseX=r.touches[0].x,n.mouseY=r.touches[0].y,n.mouseIsPressed=!0,n.mouseButton=r.LEFT,r.mousePressed(e))||e.preventDefault(),r.touchStarted(e)||e.preventDefault()},r._ontouchmove=e=>{n.touches=[...e.touches].map(o),r._isTouchAware||(n.mouseX=r.touches[0].x,n.mouseY=r.touches[0].y,r.mouseDragged(e))||e.preventDefault(),r.touchMoved(e)||e.preventDefault()},r._ontouchend=e=>{n.touches=[...e.touches].map(o),r._isTouchAware||r.touches.length||(n.mouseIsPressed=!1,r.mouseReleased(e))||e.preventDefault(),r.touchEnded(e)||e.preventDefault()},e.addEventListener("touchstart",e=>r._ontouchstart(e)),e.addEventListener("touchmove",e=>r._ontouchmove(e)),e.addEventListener("touchcancel",e=>r._ontouchend(e)),e.addEventListener("touchend",e=>r._ontouchend(e)),window&&((e=window.addEventListener)("mousemove",e=>r._onmousemove(e),!1),e("keydown",e=>r._onkeydown(e),!1),e("keyup",e=>r._onkeyup(e),!1))}},Q5.modules.math=(o,t)=>{function a(){let t,a,o=4294967295;return{setSeed(e){t=a=(null==e?Math.random()*o:e)>>>0},getSeed(){return a},rand(){return((t=(t=(t^=t<<17)^t>>13)^t<<5)>>>0)/o}}}o.DEGREES="degrees",o.RADIANS="radians",o.PI=Math.PI,o.HALF_PI=Math.PI/2,o.QUARTER_PI=Math.PI/4,o.abs=Math.abs,o.ceil=Math.ceil,o.exp=Math.exp,o.floor=Math.floor,o.loge=Math.log,o.mag=Math.hypot,o.max=Math.max,o.min=Math.min,o.round=Math.round,o.pow=Math.pow,o.sqrt=Math.sqrt,o.SHR3=1,o.LCG=2,o.angleMode=e=>o._angleMode=e,o._DEGTORAD=Math.PI/180,o._RADTODEG=180/Math.PI,o.degrees=e=>e*o._RADTODEG,o.radians=e=>e*o._DEGTORAD,o.map=(e,t,a,o,r,n)=>{e=o+(e-t)/(a-t)*(r-o);return n?o<r?Math.min(Math.max(e,o),r):Math.min(Math.max(e,r),o):e},o.lerp=(e,t,a)=>e*(1-a)+t*a,o.constrain=(e,t,a)=>Math.min(Math.max(e,t),a),o.dist=function(){var e=arguments;return 4==e.length?Math.hypot(e[0]-e[2],e[1]-e[3]):Math.hypot(e[0]-e[3],e[1]-e[4],e[2]-e[5])},o.norm=(e,t,a)=>o.map(e,t,a,0,1),o.sq=e=>e*e,o.fract=e=>e-Math.floor(e),o.sin=e=>("degrees"==o._angleMode&&(e=o.radians(e)),Math.sin(e)),o.cos=e=>("degrees"==o._angleMode&&(e=o.radians(e)),Math.cos(e)),o.tan=e=>("degrees"==o._angleMode&&(e=o.radians(e)),Math.tan(e)),o.asin=e=>{let t=Math.asin(e);return t="degrees"==o._angleMode?o.degrees(t):t},o.acos=e=>{let t=Math.acos(e);return t="degrees"==o._angleMode?o.degrees(t):t},o.atan=e=>{let t=Math.atan(e);return t="degrees"==o._angleMode?o.degrees(t):t},o.atan2=(e,t)=>{let a=Math.atan2(e,t);return a="degrees"==o._angleMode?o.degrees(a):a};let i=a();i.setSeed(),o.randomSeed=e=>i.setSeed(e),o.random=(e,t)=>void 0===e?i.rand():"number"==typeof e?void 0!==t?i.rand()*(t-e)+e:i.rand()*e:e[Math.trunc(e.length*i.rand())],o.randomGenerator=e=>{e==o.LCG?i=function(){let t=4294967296,a,o;return{setSeed(e){o=a=(null==e?Math.random()*t:e)>>>0},getSeed(){return a},rand(){return(o=(1664525*o+1013904223)%t)/t}}}():e==o.SHR3&&(i=a()),i.setSeed()};var r=new function(){var o,t,r,d=new Array(128),h=new Array(256),u=new Array(128),_=new Array(128),p=new Array(256),g=new Array(256),n=()=>4294967296*i.rand()-2147483648,s=()=>.5+2.328306e-10*(n()<<0),e=()=>{for(var e,t,a;;){if(e=r*u[o],0==o){for(;t=s(),a=s(),e=.2904764*-Math.log(t),(t=-Math.log(a))+t<e*e;);return 0<r?3.44262+e:-3.44262-e}if(_[o]+s()*(_[o-1]-_[o])<Math.exp(-.5*e*e))return e;if(r=n(),o=127&r,Math.abs(r)<d[o])return r*u[o]}},a=()=>{for(var e;;){if(0==o)return 7.69711-Math.log(s());if(e=t*p[o],g[o]+s()*(g[o-1]-g[o])<Math.exp(-e))return e;if((t=n())<h[o=255&t])return t*p[o]}};this.SHR3=n,this.UNI=s,this.RNOR=()=>(r=n(),o=127&r,Math.abs(r)<d[o]?r*u[o]:e()),this.REXP=()=>(t=n()>>>0)<d[o=255&t]?t*p[o]:a(),this.zigset=()=>{var e,t=2147483648,a=4294967296,o=3.442619855899,r=o,n=.00991256303526217,s=7.697117470131487,i=s,l=.003949659822581572,c=n/Math.exp(-.5*o*o);for(d[0]=Math.floor(o/c*t),d[1]=0,u[0]=c/t,u[127]=o/t,_[0]=1,_[127]=Math.exp(-.5*o*o),e=126;1<=e;e--)o=Math.sqrt(-2*Math.log(n/o+Math.exp(-.5*o*o))),d[e+1]=Math.floor(o/r*t),r=o,_[e]=Math.exp(-.5*o*o),u[e]=o/t;for(c=l/Math.exp(-s),h[0]=Math.floor(s/c*a),h[1]=0,p[0]=c/a,p[255]=s/a,g[0]=1,g[255]=Math.exp(-s),e=254;1<=e;e--)s=-Math.log(l/s+Math.exp(-s)),h[e+1]=Math.floor(s/i*a),i=s,g[e]=Math.exp(-s),p[e]=s/a}};r.hasInit=!1,o.randomGaussian=(e,t)=>(r.hasInit||(r.zigset(),r.hasInit=!0),r.RNOR()*t+e),o.randomExponential=()=>(r.hasInit||(r.zigset(),r.hasInit=!0),r.REXP()),o.PERLIN="perlin",o.SIMPLEX="simplex",o.BLOCKY="blocky",o.Noise=Q5.PerlinNoise;let n;o.noiseMode=e=>{t.Noise=Q5[e[0].toUpperCase()+e.slice(1)+"Noise"],n=null},o.noiseSeed=e=>{n=new o.Noise(e)},o.noise=(e=0,t=0,a=0)=>(n??=new o.Noise).noise(e,t,a),o.noiseDetail=(e,t)=>{n??=new o.Noise,0<e&&(n.octaves=e),0<t&&(n.falloff=t)}},Q5.Noise=class{},Q5.PerlinNoise=class extends Q5.Noise{constructor(e){super(),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.octaves=1,this.falloff=.5,this.p=null==e?Array.from({length:256},()=>Math.floor(256*Math.random())):this.seedPermutation(e),this.p=this.p.concat(this.p)}seedPermutation(t){var a,o,r=[];for(let e=0;e<256;e++)r[e]=e;for(let e=255;0<e;e--)a=(t=16807*t%2147483647)%(e+1),o=r[e],r[e]=r[a],r[a]=o;return r}dot(e,t,a,o){return e[0]*t+e[1]*a+e[2]*o}mix(e,t,a){return(1-a)*e+a*t}fade(e){return e*e*e*(e*(6*e-15)+10)}noise(t,a,o){var r=this;let n=0,s=1,i=1,l=0;for(let e=0;e<r.octaves;e++){var c=255&Math.floor(t*s),d=255&Math.floor(a*s),h=255&Math.floor(o*s),u=t*s-Math.floor(t*s),_=a*s-Math.floor(a*s),p=o*s-Math.floor(o*s),g=r.fade(u),x=r.fade(_),m=r.fade(p),v=r.p[c]+d,f=r.p[v]+h,v=r.p[v+1]+h,c=r.p[1+c]+d,d=r.p[c]+h,c=r.p[c+1]+h,h=r.mix(r.dot(r.grad3[r.p[f]%12],u,_,p),r.dot(r.grad3[r.p[d]%12],u-1,_,p),g),y=r.mix(r.dot(r.grad3[r.p[v]%12],u,_-1,p),r.dot(r.grad3[r.p[c]%12],u-1,_-1,p),g),f=r.mix(r.dot(r.grad3[r.p[f+1]%12],u,_,p-1),r.dot(r.grad3[r.p[d+1]%12],u-1,_,p-1),g),d=r.mix(r.dot(r.grad3[r.p[v+1]%12],u,_-1,p-1),r.dot(r.grad3[r.p[c+1]%12],u-1,_-1,p-1),g),v=r.mix(h,y,x),c=r.mix(f,d,x);n+=r.mix(v,c,m)*i,l+=i,i*=r.falloff,s*=2}return(n/l+1)/2}},Q5.modules.sound=(e,o)=>{e.Sound=Q5.Sound,e.loadSound=(e,t)=>{o._preloadCount++,Q5.aud??=new window.AudioContext;let a=new Q5.Sound(e,t);return a.addEventListener("canplaythrough",()=>{o._preloadCount--,t&&t(a)}),a},e.getAudioContext=()=>Q5.aud,e.userStartAudio=()=>Q5.aud.resume()},Q5.Sound=class extends Audio{constructor(e){super(e);let t=this;t.load(),t.panner=Q5.aud.createStereoPanner(),t.source=Q5.aud.createMediaElementSource(t),t.source.connect(t.panner),t.panner.connect(Q5.aud.destination),Object.defineProperty(t,"pan",{get:()=>t.panner.pan.value,set:e=>t.panner.pan.value=e})}setVolume(e){this.volume=e}setLoop(e){this.loop=e}setPan(e){this.pan=e}},Q5.modules.util=(a,r)=>{a._loadFile=(e,t,a)=>{r._preloadCount++;let o={};return fetch(e).then(e=>"json"==a?e.json():"text"==a?e.text():void 0).then(e=>{r._preloadCount--,Object.assign(o,e),t&&t(e)}),o},a.loadStrings=(e,t)=>a._loadFile(e,t,"text"),a.loadJSON=(e,t)=>a._loadFile(e,t,"json"),"object"==typeof localStorage&&(a.storeItem=localStorage.setItem,a.getItem=localStorage.getItem,a.removeItem=localStorage.removeItem,a.clearStorage=localStorage.clear),a.year=()=>(new Date).getFullYear(),a.day=()=>(new Date).getDay(),a.hour=()=>(new Date).getHours(),a.minute=()=>(new Date).getMinutes(),a.second=()=>(new Date).getSeconds()},Q5.modules.vector=o=>{o.createVector=(e,t,a)=>new Q5.Vector(e,t,a,o)},Q5.Vector=class{constructor(e,t,a,o){this.x=e||0,this.y=t||0,this.z=a||0,this._$=o||window,this._cn=null,this._cnsq=null}set(e,t,a){this.x=e||0,this.y=t||0,this.z=a||0}copy(){return new Q5.Vector(this.x,this.y,this.z)}_arg2v(e,t,a){return void 0!==e.x?e:void 0!==t?{x:e,y:t,z:a||0}:{x:e,y:e,z:e}}_calcNorm(){this._cnsq=this.x*this.x+this.y*this.y+this.z*this.z,this._cn=Math.sqrt(this._cnsq)}add(){var e=this._arg2v(...arguments);return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}rem(){var e=this._arg2v(...arguments);return this.x%=e.x,this.y%=e.y,this.z%=e.z,this}sub(){var e=this._arg2v(...arguments);return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}mult(){var e=this._arg2v(...arguments);return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}div(){var e=this._arg2v(...arguments);return e.x?this.x/=e.x:this.x=0,e.y?this.y/=e.y:this.y=0,e.z?this.z/=e.z:this.z=0,this}mag(){return this._calcNorm(),this._cn}magSq(){return this._calcNorm(),this._cnsq}dot(){var e=this._arg2v(...arguments);return this.x*e.x+this.y*e.y+this.z*e.z}dist(){var e=this._arg2v(...arguments),t=this.x-e.x,a=this.y-e.y,e=this.z-e.z;return Math.sqrt(t*t+a*a+e*e)}cross(){var e=this._arg2v(...arguments),t=this.y*e.z-this.z*e.y,a=this.z*e.x-this.x*e.z,e=this.x*e.y-this.y*e.x;return this.x=t,this.y=a,this.z=e,this}normalize(){this._calcNorm();var e=this._cn;return 0!=e&&(this.x/=e,this.y/=e,this.z/=e),this._cn=1,this._cnsq=1,this}limit(e){this._calcNorm();var t=this._cn;return e<t&&(this.x*=t=e/t,this.y*=t,this.z*=t,this._cn=e,this._cnsq=e*e),this}setMag(e){this._calcNorm();var t=e/this._cn;return this.x*=t,this.y*=t,this.z*=t,this._cn=e,this._cnsq=e*e,this}heading(){return this._$.atan2(this.y,this.x)}rotate(e){var t=this._$.cos(e),e=this._$.sin(e),a=this.x*t-this.y*e,e=this.x*e+this.y*t;return this.x=a,this.y=e,this}angleBetween(){var e=this._arg2v(...arguments),t=Q5.Vector.cross(this,e);return this._$.atan2(t.mag(),this.dot(e))*Math.sign(t.z||1)}lerp(){var e=[...arguments],t=this._arg2v(...e.slice(0,-1)),e=e.at(-1);return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}reflect(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))}array(){return[this.x,this.y,this.z]}equals(e,t){return t??=Number.EPSILON||0,Math.abs(e.x-this.x)<t&&Math.abs(e.y-this.y)<t&&Math.abs(e.z-this.z)<t}fromAngle(e,t){return this._cn=t=void 0===t?1:t,this._cnsq=t*t,this.x=t*this._$.cos(e),this.y=t*this._$.sin(e),this.z=0,this}fromAngles(e,t,a){this._cn=a=void 0===a?1:a,this._cnsq=a*a;var o=this._$.cos(t),t=this._$.sin(t),r=this._$.cos(e),e=this._$.sin(e);return this.x=a*e*t,this.y=-a*r,this.z=a*e*o,this}random2D(){return this._cn=this._cnsq=1,this.fromAngle(Math.random()*Math.PI*2)}random3D(){return this._cn=this._cnsq=1,this.fromAngles(Math.random()*Math.PI*2,Math.random()*Math.PI*2)}toString(){return`[${this.x}, ${this.y}, ${this.z}]`}},Q5.Vector.add=(e,t)=>e.copy().add(t),Q5.Vector.cross=(e,t)=>e.copy().cross(t),Q5.Vector.dist=(e,t)=>Math.hypot(e.x-t.x,e.y-t.y,e.z-t.z),Q5.Vector.div=(e,t)=>e.copy().div(t),Q5.Vector.dot=(e,t)=>e.copy().dot(t),Q5.Vector.equals=(e,t,a)=>e.equals(t,a),Q5.Vector.lerp=(e,t,a)=>e.copy().lerp(t,a),Q5.Vector.limit=(e,t)=>e.copy().limit(t),Q5.Vector.heading=e=>this._$.atan2(e.y,e.x),Q5.Vector.magSq=e=>e.x*e.x+e.y*e.y+e.z*e.z,Q5.Vector.mag=e=>Math.sqrt(Q5.Vector.magSq(e)),Q5.Vector.mult=(e,t)=>e.copy().mult(t),Q5.Vector.normalize=e=>e.copy().normalize(),Q5.Vector.rem=(e,t)=>e.copy().rem(t),Q5.Vector.sub=(e,t)=>e.copy().sub(t);for(let o of["fromAngle","fromAngles","random2D","random3D"])Q5.Vector[o]=(e,t,a)=>(new Q5.Vector)[o](e,t,a);