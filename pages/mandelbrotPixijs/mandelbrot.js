!function(){var o,u,i=400,s=400,N=!0,v=1,r=[8,5,1],l=15,S=new Array(r.length),m=new Array(r.length),d=new Array(r.length),c=!1,e=document.getElementById("canvasWrapper");let a=new PIXI.Application({width:e.clientWidth,height:e.clientWidth});i=e.clientWidth,s=i,u=new PIXI.Graphics,a.stage.addChild(u);for(var t=0;t<r.length;t++)d[t]=new PIXI.Graphics,a.stage.addChild(d[t]);e.appendChild(a.view);var g,f,y,I,Y,n,h,p,B,E,b,w=!(a.stage.interactive=!0),x=0,k=0,A=h,F=p,z=B,C=50,M=new Rainbow,R=(M.setSpectrum("#000764","#206bcb","#edffff","#ffaa00","#000200"),M.setNumberRange(0,C),["#000764","#206bcb","#edffff","#ffaa00","#000200"]);function W(e){var t=e[0].clientX-e[1].clientX,e=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+e*e)}function P(){document.getElementById("xa").value=p,document.getElementById("ya").value=B,document.getElementById("za").value=h,M.setNumberRange(0,C),D(),T(),X()}function T(){for(var e=0;e<S.length;e++)clearTimeout(S[e]);if(N)for(e=0;e<m.length;e++)clearInterval(m[e]);else for(e=0;e<m.length;e++)cancelAnimationFrame(m[e]);for(var t=0;t<r.length;t++)d[t].clear()}function X(){function e(e){return function(){var t,n,o,l,c,a;t=h,n=p,o=B,l=r[e],a=0,m[c=e]=N?setInterval(function(){a<i?(q(a,t,n,o,l,G,c),a+=l):clearInterval(m[c])}):requestAnimationFrame(function e(){a<i?(q(a,t,n,o,l,G,c),a+=l,m[c]=requestAnimationFrame(e)):cancelAnimationFrame(m[c])})}}j(h,p,B);for(var t=0;t<r.length;t++)S[t]=setTimeout(e(t))}function q(e,t,n,o,l,c,a){for(var i=0;i<s;i+=l){for(var u,r=n+e/t,m=o+v*(i/t),d=0,g=0,f=0;d*d+g*g<=4&&f<C;)u=d*d-g*g+r,g=2*d*g+m,d=u,f+=1;c(e,i,d,g,f,l,a)}}function j(e,t,n){var o;for(u.clear(),o=0;o<i;)q(o,e,t,n,l,G,null),o+=l}function G(e,t,n,o,l,c,a){var i=null,i=null===a?u:d[a];"smoothColoring"===b?l<C?(a=Math.log(n*n+o*o)/2,n=Math.log(a/Math.log(2))/Math.log(2),i.beginFill(H((l=l+1-n)/C*(R.length-1)))):i.beginFill("#000000"):i.beginFill(H(l)),i.drawRect(e,t,c,c),i.endFill()}function H(e){switch(b){case"escapeTime":return"#"+M.colourAt(e);case"smoothColoring":n=e,t=L(R[Math.floor(n)]),c=L(R[Math.floor(n)+1]);var t,n=n%1,o=Math.floor((c.r-t.r)*n+t.r),l=Math.floor((c.g-t.g)*n+t.g),c=Math.floor((c.b-t.b)*n+t.b);return"rgb("+o+","+l+","+c+")";default:return"#"+M.colourAt(e)}}function L(e){return e=(e+"").replace("#",""),{r:parseInt(e.charAt(0)+e.charAt(1),16),g:parseInt(e.charAt(2)+e.charAt(3),16),b:parseInt(e.charAt(4)+e.charAt(5),16)}}function O(){c&&(n=.1,h=i/4,p=-2.5,B=-2*(v=1),E=1.1,C=50,M.setSpectrum("#000764","#206bcb","#edffff","#ffaa00","#000200"),M.setNumberRange(0,C),R=["#000764","#206bcb","#edffff","#ffaa00","#000200"],b="smoothColoring",document.getElementById(b).checked=!0,document.getElementById("flipImaginaryAxis").checked=!0,document.getElementById("xa").value=p,document.getElementById("ya").value=B,document.getElementById("za").value=h,D(),T(),X())}function V(e){c&&(e=e?parseFloat(document.getElementById("xa").value)+n:parseFloat(document.getElementById("xa").value)-n,document.getElementById("xa").value=e,p=e,D(),T(),X())}function J(e){c&&(e=e?parseFloat(document.getElementById("ya").value)+n:parseFloat(document.getElementById("ya").value)-n,document.getElementById("ya").value=e,B=e,D(),T(),X())}function K(e){c&&(e=e.value,b=e,D(),T(),X())}function D(){var e="Scroll: "+n+"<br /> Current zoom: "+h+"<br /> left: "+p+"<br /> right: "+(p+i/h)+"<br /> top: "+B+"<br /> bottom: "+(B+v*(s/h))+"<br /> zoom factor: "+E+"<br /> max iterations of loop: "+C+"<br /> uses "+b+" algorithm for coloring";document.getElementById("dtls").innerHTML=e}a.view.onmousedown=function(e){e.preventDefault(),c&&(o=a.view.getBoundingClientRect(),w=!0,g=e.clientX-o.left,f=e.clientY-o.top,A=h,F=p,z=B,T())},a.view.onmousemove=function(e){e.preventDefault(),c&&w&&(o=a.view.getBoundingClientRect(),y=e.clientX-o.left,I=e.clientY-o.top,j(A,F-(x=p+y/h-(p+g/h)),z-(k=B+v*(I/h)-(B+v*(f/h)))))},a.view.onmouseup=function(e){e.preventDefault(),c&&(w=!1,p=F,B=z,B-=k,n=(p-=x)+2/(h=A)-(p-1/h),k=x=0,P())},a.view.onmouseleave=function(e){e.preventDefault(),c&&w&&(w=!1,p=F,B=z,B-=k,n=(p-=x)+2/(h=A)-(p-1/h),k=x=0,P())},a.view.onwheel=function(e){var t,n;T(),e.preventDefault(),c&&(e=e.deltaY,t=p+i/2/h,n=B+v*(s/2/h),0<e?h/=E:e<0&&(h*=E),j(h,p=t-i/2/h,B=n-v*(s/2/h)),P())},a.view.ontouchstart=function(e){var t;e.preventDefault(),c&&(o=a.view.getBoundingClientRect(),1===e.touches.length?(w=!0,t=e.touches[0],g=t.clientX-o.left,f=t.clientY-o.top):2===e.touches.length&&(Y=W(e.touches)),A=h,F=p,z=B,T())},a.view.ontouchmove=function(e){if(e.preventDefault(),c){if(o=a.view.getBoundingClientRect(),2===e.touches.length){var t=W(e.touches),n=z+v*(s/2/A);F=F+i/2/A-i/2/(A*=t/Y),z=n-v*(s/2/A)}else if(1===e.touches.length){if(!w)return;t=e.touches[0],n=(y=t.clientX-o.left,I=t.clientY-o.top,p+g/h);x=p+y/h-n,k=B+v*(I/h)-(B+v*(f/h))}j(A,F-x,z-k)}},a.view.ontouchend=function(e){e.preventDefault(),c&&(w=!1,p=F,B=z,B-=k,n=(p-=x)+2/(h=A)-(p-1/h),k=x=0,P())},new Worker("getOptimalPixel.js").onmessage=function(e){c=!0,l=e.data.pixelSize,O(),document.getElementById("loadingText").innerText=""},document.getElementById("timesTwo").onclick=function(){c&&(C*=2,D(),T(),X())},document.getElementById("divideTwo").onclick=function(){c&&(C/=2,D(),T(),X())},document.getElementById("bigPixel").onclick=function(){c&&Swal.fire({title:"Info",input:"text",text:"Change big pixel size",inputValue:20,inputPlaceholder:"20"}).then(function(e){e=parseInt(e.value);Number.isNaN(e)?Swal.fire({icon:"error",title:"Error",text:"Invalid number!"}):l=e})},document.getElementById("trigger1").onclick=function(){},document.getElementById("trigger2").onclick=O,document.getElementById("trigger3").onclick=function(){c&&(p=parseFloat(document.getElementById("xa").value),B=parseFloat(document.getElementById("ya").value),h=parseFloat(document.getElementById("za").value),D(),T(),X())},document.getElementById("trigger4").onclick=function(){i=a.view.width=parseInt(prompt("Please enter canvas width in pixels",200))||200,s=a.view.height=parseInt(prompt("Please enter canvas height in pixels",200))||200,O()},document.getElementById("trigger5").onclick=function(){Swal.fire({icon:"info",title:"About",text:"A mandelbrot set generator in javascript created by pvzzombs. "})},document.getElementById("flipImaginaryAxis").onclick=function(){c&&(v=1==v?-1:1,B*=-1,document.getElementById("ya").value=B,D(),T(),X())},document.getElementById("trigger6").onclick=function(){c&&(n=.1,h=i/4,p=-2.5,B=-2*v,document.getElementById("xa").value=p,document.getElementById("ya").value=B,document.getElementById("za").value=h,D(),T(),X())},document.getElementById("xp").onclick=function(){V(1)},document.getElementById("xm").onclick=function(){V(0)},document.getElementById("yp").onclick=function(){J(1)},document.getElementById("ym").onclick=function(){J(0)},document.getElementById("xz").onclick=function(){c&&(n=p+2/(h+=E)-(p-1/h),document.getElementById("za").value=h,D(),T(),X())},document.getElementById("yz").onclick=function(){c&&(n=p+2/(h-=E)-(p-1/h),document.getElementById("za").value=h,D(),T(),X())},document.getElementById("zfb").onclick=function(){var e;c&&(e=document.getElementById("zf").value,E=parseFloat(e),D())},document.getElementById("trigger7").onclick=function(){var e;c&&(e=document.getElementById("mi").value,C=parseInt(e),M.setNumberRange(0,C),D(),T(),X())},document.getElementById("lrg").onclick=function(){var e;c&&((e=document.getElementById("plt").value.split(" ")).length<3?alert(" Please enter more colors "):(M.setSpectrumByArray(e),D(),T(),X()))},document.getElementById("smoothColoring").onclick=function(){K(document.getElementById("smoothColoring"))},document.getElementById("escapeTime").onclick=function(){K(document.getElementById("escapeTime"))},document.getElementById("updt").onclick=function(){var e;c&&((e=document.getElementById("crd").value.split(" ")).length<4?alert(" Please enter complete details"):(p=parseFloat(e[0]),B=parseFloat(e[1]),h=parseFloat(e[2]),C=parseFloat(e[3]),E=1.5,n=p+2/h-(p-1/h),M.setNumberRange(0,C),document.getElementById("xa").value=p,document.getElementById("ya").value=B,document.getElementById("za").value=h,document.getElementById("mi").value=C,document.getElementById("zf").value=E,D(),T(),X()))}}();